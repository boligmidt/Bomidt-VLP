(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1010:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(e,t,n){for(var o=!0;o;){var a=e,i=t,u=n;o=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,i);if(void 0!==s){if("value"in s)return s.value;var r=s.get;if(void 0===r)return;return r.call(u)}var l=Object.getPrototypeOf(a);if(null===l)return;e=l,t=i,n=u,o=!0,s=l=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var u=n(0),s=i(u),r=i(n(70)),l=function(e){return![!1,void 0,null].includes(e)},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={loaded:!1,loadCounter:0,imageCount:0},this._onLoadEvent=this._onLoadEvent.bind(this)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"timingSetup",value:function(){var e=this.props,t=e.onWillMount,n=e.delay,o=e.timeout;t&&t();var a=o,i=n;a=l(a)?a:7e3,this._delay=l(i)?i:0,this._timeout=Math.max(a,this._delay)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this._imgs.length>0&&this._removeImageEventListeners()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.onLoaded,n=e.onTimeout,o=e.onDidMount;this.timingSetup(),this.mounted=!0,this._imgs=this.imageLoad.getElementsByTagName("img"),0===this._imgs.length?t?t():n&&n():(o&&o(),this._addImageEventListeners(),this._setOnTimeoutEvent())}},{key:"_addImageEventListeners",value:function(){var e=this;this.setState({imageCount:this._imgs.length},(function(){for(var t=0;t<e._imgs.length;t++)e._imgs[t].addEventListener("load",e._onLoadEvent)}))}},{key:"_removeImageEventListeners",value:function(){for(var e=0;e<this._imgs.length;e++)this._imgs[e].removeEventListener("load",this._onLoadEvent)}},{key:"_setOnTimeoutEvent",value:function(){var e=this;setTimeout((function(){e._hasTimedOut&&e._runOnTimeoutFunction()}),this._timeout)}},{key:"_runOnTimeoutFunction",value:function(){var e,t,n,o=this;this.mounted&&(e=o.props,t=e.onTimeout,n=e.onLoaded,o.setState({loaded:!0},(function(){t?t():n&&n()})))}},{key:"_onLoadEvent",value:function(){var e=this;this.mounted&&this.setState({loadCounter:this.state.loadCounter+1},(function(){setTimeout((function(){e._hasBeenFullyAndProperlyLoaded&&e._runOnLoadFunction()}),e._delay)}))}},{key:"_runOnLoadFunction",value:function(){var e,t=this;this.mounted&&(e=t.props.onLoaded,t.setState({loaded:!0,timedOut:!1},(function(){e&&e()})))}},{key:"_depreciatedClassNameHandler",value:function(){var e=this.props,t=e.className,n=e.classNameOnLoaded,o=e.classNameOnMount;return t||(this.state.loaded?n:o)}},{key:"render",value:function(){var e=this;return this.imageLoad&&this._hasDefinedClassName&&(this.imageLoad.className=this._depreciatedClassNameHandler()),s.default.createElement("div",null,this.state.loaded?null:this.props.placeholder,s.default.createElement("div",{ref:function(t){e.imageLoad=t}},this.props.children))}},{key:"_hasBeenFullyAndProperlyLoaded",get:function(){var e=this.state,t=e.loadCounter,n=e.imageCount,o=e.loaded;return this.mounted&&t>=n&&!o}},{key:"_hasTimedOut",get:function(){return this.mounted&&!this.state.loaded}},{key:"_hasDefinedClassName",get:function(){var e=this.props,t=e.classNameOnLoaded,n=e.classNameOnMount,o=e.className;return!!(t||n||o)}}]),t}(u.Component);t.default=d,d.propTypes={onTimeout:r.default.func,onLoaded:r.default.func.isRequired,delay:r.default.number,onDidMount:r.default.func,onWillMount:r.default.func,classNameOnLoaded:r.default.string,classNameOnMount:r.default.string,className:r.default.string},e.exports=t.default}}]);
//# sourceMappingURL=npm.react-on-images-loaded.js.map